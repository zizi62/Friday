(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{14:function(e,t,n){e.exports={wraper:"header_wraper__UnVwf",header:"header_header__1-L5A",link:"header_link__14HVq"}},21:function(e,t,n){e.exports={wraper:"signIn_wraper__20ITI",signIn:"signIn_signIn__1mMsw",form:"signIn_form__2Sh7y",inputText:"signIn_inputText__2AuFx"}},22:function(e,t,n){e.exports={input:"input_input__k8J0Q",inputError:"input_inputError__lV3v_",error:"input_error__2bxGV"}},37:function(e,t,n){e.exports={button:"button_button__2xIPi"}},39:function(e,t,n){e.exports={error:"errorMessage_error__33Qmr"}},40:function(e,t,n){e.exports={loading:"loading_loading__1QcTx"}},41:function(e,t,n){e.exports={main:"main_main__ZrJEr"}},44:function(e,t,n){e.exports=n(74)},49:function(e,t,n){},50:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(19),o=n.n(c),u=(n(49),n(50),n(12)),l=n(14),s=n.n(l),i=n(4),m=n(3),p=n(43),E=n(22),f=n.n(E),b=function(e){var t=e.onEnter,n=e.error,r=Object(p.a)(e,["onEnter","error"]),c=n?f.a.input+" "+f.a.inputError:f.a.input;return a.a.createElement("div",null,a.a.createElement("input",Object.assign({className:c,type:"text",name:"myInput",onKeyDown:function(e){13===e.charCode&&t&&t()}},r)))},d=n(37),g=n.n(d),O=function(e){return a.a.createElement("div",null,a.a.createElement("button",Object.assign({className:g.a.button},e)))},h=function(e){var t=e.loading,n=e.email,r=e.password,c=e.checkPassword,o=e.error,u=e.setEmail,l=e.setPassword,s=e.setCheckPassword,m=e.signUp;return a.a.createElement("div",null,a.a.createElement(b,{placeholder:"login",value:n,onChange:u}),a.a.createElement(b,{type:"password",placeholder:"password",value:r,onChange:l,error:o}),a.a.createElement(b,{type:"password",placeholder:"check password",value:c,onChange:s,error:o}),a.a.createElement(O,{onClick:m,disabled:!!t},"SIGN UP"),a.a.createElement(i.b,{to:fe},"SIGN IN"))},v=n(5),S=n(6),j=n.n(S),_=n(7),w=n(2),k=n(15),R=n.n(k),I=R.a.create({baseURL:"https://cards-nya-back.herokuapp.com/1.0/"}),T=function(e,t){return I.post("auth/register",{email:e,password:t}).then((function(e){return e.data.success}))},P={error:"",success:!1,loading:!1},N=function(e){return{type:"signUp/SET_REGISTER_ERROR",error:e}},y=n(39),x=n.n(y),C=function(e){var t=e.message;return a.a.createElement(a.a.Fragment,null,a.a.createElement("p",{className:x.a.error},t))},A=n(40),G=n.n(A),U=function(e){return a.a.createElement("p",{className:G.a.loading},"Loading...")},F=function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(""),l=Object(u.a)(o,2),s=l[0],i=l[1],p=Object(r.useState)(""),E=Object(u.a)(p,2),f=E[0],b=E[1],d=Object(v.c)((function(e){return e.registrationPage})),g=d.error,O=d.success,S=d.loading,w=Object(v.b)(),k=Object(r.useCallback)((function(e){c(e.currentTarget.value),w(N(""))}),[c]),R=Object(r.useCallback)((function(e){i(e.currentTarget.value)}),[i]),I=Object(r.useCallback)((function(e){b(e.currentTarget.value)}),[b]),P=Object(r.useCallback)((function(){s.length===f.length&&s===f?n&&s&&f&&w(function(e,t){return function(){var n=Object(_.a)(j.a.mark((function n(r){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r({type:"SET_LOADING"}),n.next=4,T(e,t);case 4:n.sent&&r({type:"signUp/IIS_REGISTER_SUCCESS"}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),r(N(n.t0.message));case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()}(n,s)):w(N("passwords don't match"))}),[n,s,f]);return O?a.a.createElement(m.a,{to:fe}):a.a.createElement("div",null,a.a.createElement("h2",null,"SIGN UP"),S&&a.a.createElement(U,null),!!g&&a.a.createElement(C,{message:g}),a.a.createElement(h,{loading:S,email:n,password:s,checkPassword:f,error:g,setEmail:k,setPassword:R,setCheckPassword:I,signUp:P}))},D=function(){return a.a.createElement("div",null,a.a.createElement(b,{type:"password"}),a.a.createElement(b,null),a.a.createElement(O,null,"SEND PASSWORD"),a.a.createElement(i.b,{to:fe},"SIGN IN"))},W=function(){return a.a.createElement("div",null,a.a.createElement("h2",null,"SET NEW PASSWORD"),a.a.createElement(D,null))},L=R.a.create({baseURL:"https://cards-nya-back.herokuapp.com/1.0/"}),M=function(e){return Object(_.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.post("auth/forgot",{email:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},H={success:!1,error:""},J=function(e){var t=Object(r.useState)(""),n=Object(u.a)(t,2),c=n[0],o=n[1],l=Object(v.b)(),s=Object(r.useCallback)((function(e){o(e.currentTarget.value)}),[o]);return a.a.createElement("div",null,a.a.createElement(b,{type:"email",placeholder:"email",onChange:s,value:c,error:e.error}),a.a.createElement(O,{onClick:function(){l(function(e){return function(){var t=Object(_.a)(j.a.mark((function t(n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M(e);case 3:t.next=10;break;case 5:t.prev=5,t.t0=t.catch(0),r=t.t0,console.log(r),n({type:"FORGOT_PASSWORD_ERROR",error:t.t0});case 10:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()}(c))}},"Send email"),a.a.createElement(i.b,{to:fe},"Sign in"))},V=function(){var e=Object(v.c)((function(e){return e.forgotPasswordPage.error}));return a.a.createElement("div",null,a.a.createElement("h2",null,"FORGOT PASSWORD"),!!e&&a.a.createElement(C,{message:e}),a.a.createElement(J,{error:e}))},K=function(){return a.a.createElement("div",null,a.a.createElement(V,null))},Q=n(21),B=n.n(Q),q=function(e){var t=e.email,n=e.password,r=e.rememberMe,c=e.error,o=e.setEmail,u=e.setPassword,l=e.setRememberMe,s=e.signIn;return a.a.createElement("div",{className:B.a.signIn},a.a.createElement(b,{placeholder:"email",type:"email",onChange:o,value:t,error:c}),a.a.createElement(b,{type:"password",placeholder:"password",onChange:u,value:n,error:c}),a.a.createElement(b,{type:"checkbox",onChange:l,checked:r}),a.a.createElement("span",null,"Remember Me"),a.a.createElement(O,{onClick:s},"SIGN IN"),a.a.createElement(i.b,{to:de},"Forgot password?"),a.a.createElement("br",null),a.a.createElement(i.b,{to:be},"Registration"))},Z=R.a.create({baseURL:"https://cards-nya-back.herokuapp.com/1.0/"}),$=function(e,t,n){return Object(_.a)(j.a.mark((function r(){return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Z.post("auth/login",{email:e,password:t,rememberMe:n});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},z=R.a.create({baseURL:"https://cards-nya-back.herokuapp.com/1.0/"}),X=function(e){localStorage.setItem("token",e)},Y=function(){return localStorage.getItem("token")},ee=function(e){return Object(_.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.post("auth/me",{token:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},te={profile:{},error:"",token:""},ne=function(e){return{type:"profile/SET_PROFILE",profile:e}},re=function(e){return{type:"profile/SET_TOKEN",token:e}},ae=function(e){return{type:"profile/SET_ERROR",error:e}},ce={isAuth:!1,error:""},oe=function(e){return{type:"signIn/IS_AUTH_SUCCESS",error:"",isAuth:e}},ue=function(e){return{type:"signIn/SET_ERROR",error:e,isAuth:!1}},le=function(e){return function(t){t(ue(e))}},se=function(){var e=Object(v.c)((function(e){return e.signInPage.error})),t=Object(r.useState)(""),n=Object(u.a)(t,2),c=n[0],o=n[1],l=Object(r.useState)(""),s=Object(u.a)(l,2),i=s[0],m=s[1],p=Object(r.useState)(!1),E=Object(u.a)(p,2),f=E[0],b=E[1],d=Object(v.b)(),g=Object(r.useCallback)((function(){c&&i?(d(function(e,t,n){return function(){var r=Object(_.a)(j.a.mark((function r(a){var c;return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,$(e,t,n);case 3:c=r.sent,a(oe(!0)),a(re(c.data.token)),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),r.t0.response?a(ue(r.t0.response.data.error)):a(ue("Some ERROR"));case 11:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(e){return r.apply(this,arguments)}}()}(c,i,f)),o(""),m(""),b(!1)):d(le("all fields must be filled"))}),[c,i,f,d]),O=Object(r.useCallback)((function(e){o(e.currentTarget.value),d(le(""))}),[o]),h=Object(r.useCallback)((function(e){m(e.currentTarget.value),d(le(""))}),[m]),S=Object(r.useCallback)((function(e){return b(e.currentTarget.checked)}),[b]);return a.a.createElement("div",{className:B.a.wraper},a.a.createElement("h2",null,"SIGN IN"),e&&a.a.createElement(C,{message:e}),a.a.createElement(q,{email:c,password:i,rememberMe:f,error:e,setEmail:O,setPassword:h,setRememberMe:S,signIn:g}))},ie=function(){var e=Object(v.c)((function(e){return e.signInPage.isAuth}));return a.a.createElement(a.a.Fragment,null,e&&a.a.createElement(m.a,{to:ge}),a.a.createElement(se,null))},me=function(e){var t=e.profile;return a.a.createElement("div",null,a.a.createElement("h2",null,t.name))},pe=function(){var e=Object(v.c)((function(e){return e.profilePage.profile})),t=Object(v.b)();Object(r.useEffect)((function(){!e.name&&t(function(){var e=Object(_.a)(j.a.mark((function e(t,n){var r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=n().profilePage.token,e.next=4,ee(r);case 4:a=e.sent,t(ne(a.data)),t(re(a.data.token)),X(a.data.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),e.t0.response?(t(ae(e.t0.response.data.error)),t(oe(!1)),console.log(e.t0.response.data.error)):t(ae("Some ERROR"));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}())}),[]);return a.a.createElement("div",null,a.a.createElement(me,{profile:e}),a.a.createElement(O,{onClick:function(){return t((function(e){X(""),e(oe(!1)),e(ne({}))}))}},"SIGN OUT"))},Ee=function(){var e=Object(v.c)((function(e){return e.signInPage.isAuth}));return a.a.createElement("div",null,a.a.createElement("h2",null,"Profile"),e?a.a.createElement(pe,null):a.a.createElement(m.a,{to:fe}))},fe="/",be="/registration",de="/forgot-password",ge="/profile",Oe=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(m.b,{exact:!0,path:fe,component:ie}),a.a.createElement(m.b,{path:be,component:F}),a.a.createElement(m.b,{path:de,component:K}),a.a.createElement(m.b,{path:"/set-new-password",component:W}),a.a.createElement(m.b,{path:ge,component:Ee}))},he=function(){var e=Object(r.useState)(!0),t=Object(u.a)(e,2),n=t[0],c=t[1];return a.a.createElement("div",{className:s.a.header},n?a.a.createElement("button",{onClick:function(){return c(!1)}},"Show navigation menu"):a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{onClick:function(){return c(!0)}},"Hide navigation menu"),a.a.createElement(i.b,{className:s.a.link,to:fe},"SIGN IN"),a.a.createElement(i.b,{className:s.a.link,to:be},"REGISTRATION"),a.a.createElement(i.b,{className:s.a.link,to:de},"FORGOT PASSWORD"),a.a.createElement(i.b,{className:s.a.link,to:"/set-new-password"},"SET NEW PASSWORD"),a.a.createElement(i.b,{className:s.a.link,to:ge}," PROFILE")))},ve=function(){return a.a.createElement("div",{className:s.a.wraper},a.a.createElement(he,null))},Se=n(41),je=n.n(Se),_e=function(){return a.a.createElement("div",{className:je.a.main},a.a.createElement(Oe,null))};var we=function(){var e=Object(v.b)();return Object(r.useEffect)((function(){var t=Y();t&&e(function(e,t){return function(n){n(oe(e)),n(re(t))}}(!0,t))}),[]),a.a.createElement("div",{className:"App"},a.a.createElement(ve,null),a.a.createElement(_e,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ke=n(17),Re=n(42),Ie={},Te=Object(ke.c)({profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"profile/SET_PROFILE":return Object(w.a)(Object(w.a)({},e),{},{profile:t.profile});case"profile/SET_TOKEN":return Object(w.a)(Object(w.a)({},e),{},{token:t.token});case"profile/SET_ERROR":return Object(w.a)(Object(w.a)({},e),{},{error:t.error});default:return e}},forgotPasswordPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FORGOT_PASSWORD_SUCCESS":return Object(w.a)(Object(w.a)({},e),{},{success:!0,error:""});case"FORGOT_PASSWORD_ERROR":return Object(w.a)(Object(w.a)({},e),{},{error:t.error})}return e},registrationPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"signUp/IIS_REGISTER_SUCCESS":return Object(w.a)(Object(w.a)({},e),{},{success:!0,loading:!1});case"signUp/SET_REGISTER_ERROR":return Object(w.a)(Object(w.a)({},e),{},{error:t.error,success:!1,loading:!1});case"SET_LOADING":return Object(w.a)(Object(w.a)({},e),{},{loading:!0});default:return e}},setNewPasswordPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie;return e},signInPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"signIn/IS_AUTH_SUCCESS":return Object(w.a)(Object(w.a)({},e),{},{isAuth:t.isAuth});case"signIn/SET_ERROR":return Object(w.a)(Object(w.a)({},e),{},{error:t.error});default:return e}}}),Pe=Object(ke.d)(Te,Object(ke.a)(Re.a));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(i.a,null,a.a.createElement(v.a,{store:Pe},a.a.createElement(we,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[44,1,2]]]);
//# sourceMappingURL=main.cd224633.chunk.js.map